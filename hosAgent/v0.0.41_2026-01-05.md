# Changelog v0.0.41 (2026-01-05)

## feat(chat): 优化 AI 思考与工具调用展示，支持 MiniMax 推理详情回传

### 1. 前端视觉与交互优化 (Manus 风格)
- **StepsContainer**: 引入全新的链式步骤容器，将 AI 思考 (Reasoning)、工具调用 (Tool Call) 和文本回复统一展示。
- **AssistantMessage**: 采用 Manus 设计风格，左侧连线贯穿整个思考与执行链路，提供更清晰的执行脉络。
- **交互细节**: 
  - AI 思考完成后自动收起，保持界面整洁。
  - 工具调用支持点击展开查看原始参数与执行结果。
  - 支持流式状态下的实时状态切换（Thinking -> Done）。

### 2. 后端 MiniMax 推理链路增强
- **推理详情回传**: 完整支持 MiniMax 的 `reasoning_details` (Interleaved Thinking) 机制。
- **持久化**: 在数据库 `messages` 表中新增 `reasoning_details` 字段，确保后续对话能完整回传推理上下文。
- **鲁棒性**: 针对 MiniMax 模型在工具调用时可能混入 XML 标签的问题，增加了参数清理逻辑，提升 JSON 解析成功率。

### 3. 系统稳定性与状态管理
- **撤回同步**: 优化消息撤回逻辑，同步清理 `TaskManager` 中的任务计划缓存，确保前后端状态一致。
- **数据结构**: 统一了 `ReasoningDetail` 在 Provider、Repository 和路由层的定义。
