# hosAgent v0.0.29（2025-12-29）

## 变更概览

- **前端启动优化**：添加自动端口管理脚本，避免端口冲突问题
- **样式优化**：大幅优化 Markdown 渲染样式，提升阅读体验
- **文档完善**：全面更新 README 文档，添加架构设计和部署指南
- **配置更新**：更新 .kiro hooks 配置，添加 Claude Code 本地配置

## 详情

### Added

- **前端启动脚本**：
  - `frontend/scripts/start-dev.js`：开发模式自动端口管理
  - `frontend/scripts/start-prod.js`：生产模式自动端口管理
  - 自动检测端口占用并分配可用端口（优先尝试 3000）
  - 端口信息保存到项目根目录的 `.ports.json`

- **Claude Code 配置**：
  - `.claude/settings.local.json`：允许 git tag 操作权限

### Changed

- **frontend/package.json**：
  - `dev` 脚本改为使用 `scripts/start-dev.js`
  - `start` 脚本改为使用 `scripts/start-prod.js`

- **Markdown 样式优化**（`frontend/src/app/globals.css`）：
  - 列表样式：自定义圆点，主色调突出，嵌套列表颜色变浅
  - 行内代码：主色调背景，更醒目的边框和内边距
  - 标题间距：增加标题上边距（1.25em），提升层级感
  - 列表项间距：增加间距（0.4em），提升可读性
  - 支持有序列表 `::marker` 样式（主色调，加粗）
  - 表格样式：优化表头背景和边框颜色
  - 引用块样式：左侧主色调边框，浅色背景

- **类型定义优化**：
  - `ChatInput.tsx`：`uploadedVideo` 类型从 `string` 改为 `UploadedVideo`
  - `MediaPreview.tsx`：同步更新类型定义，使用 `uploadedVideo.data` 作为源

- **.kiro hooks 配置**：
  - `sync-docs-on-change.kiro.hook`：添加 `workspaceFolderName` 和 `shortName` 字段

### Documentation

- **README.md 全面更新**：
  - 添加版本徽章（链接到 CHANGELOG）
  - 核心特性章节：多模态能力、智能视频采样、自动语音输入、错误重试、API Key 安全存储
  - 架构设计章节：Provider 架构、多模态处理流程、数据库设计（详细表结构）
  - 核心功能详解：图片/视频/音频/文档理解示例
  - API 文档：完整端点列表和请求/响应示例
  - 部署指南：生产环境部署步骤、Nginx 配置、数据库备份
  - 最新功能章节：v0.0.28 版本更新详情
  - ���障排查章节：常见问题和解决方案
  - 技术栈章节：详细的前后端技术栈和 AI Provider 支持

## 备注

本次更新主要改善了开发体验和文档质量：
- **开发体验**：自动端口管理脚本解决了多实例开发时的端口冲突问题
- **用户体验**：优化的 Markdown 样式提升了 AI 回复内容的可读性
- **文档质量**：完善的 README 文档为新开发者提供了详细的项目说明和部署指南

## Technical Details

- Commit: `a2eefaa` - docs(frontend): 完善项目文档、样式和启动脚本 (2025-12-29 14:33)