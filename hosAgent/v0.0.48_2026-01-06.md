# hosAgent v0.0.48 (2026-01-06)

## 变更概览

- 模块化重构控制台页面：将 Dashboard、AITools、DeviceSettings、QuickTools 重构为模块化目录结构
- 模块化重构布局组件：将 Header 和 Footer 重构为模块化目录结构
- 优化配置选择器：将 ConfigSelector 组件移动到 AIConfig 模块内
- 简化工具参数处理：移除复杂的响应 schema 验证，优化后端代码
- 更新项目架构文档：反映新的模块化结构

## 详情

### Added
- 新增 `frontend/src/app/console/Dashboard/` 目录：
  - `DashboardPage.tsx`：仪表盘页面主组件
  - `components/`：子组件目录（AIConfigCard、SystemStatusCard、TodayStatsCard）
  - `hooks/useUptime.ts`：运行时间获取 hook
  - `types.ts`、`constants.ts`、`utils.ts`：类型、常量和工具函数
- 新增 `frontend/src/app/console/AITools/` 目录：
  - `AIToolsPage.tsx`：AI 工具列表页面
  - `components/`：子组件目录（ToolDetail、ToolParamsTable）
  - `hooks/useTools.ts`：工具列表获取 hook
  - `types.ts`、`constants.ts`、`utils.ts`：类型、常量和工具函数
- 新增 `frontend/src/app/console/DeviceSettings/` 目录：
  - `DeviceSettingsPage.tsx`：设备设置页面
  - `types.ts`、`constants.ts`：类型和常量
- 新增 `frontend/src/app/console/QuickTools/` 目录：
  - `QuickToolsPage.tsx`：快捷工具页面
  - `types.ts`：类型定义
- 新增 `frontend/src/components/layout/Header/` 目录：
  - `Header.tsx`：顶部栏主组件
  - `components/`：子组件目录（BrandLogo、ConfigStatus、TimeDisplay）
  - `hooks/useHeaderState.ts`：头部状态管理 hook
  - `types.ts`：类型定义
- 新增 `frontend/src/components/layout/Footer/` 目录：
  - `Footer.tsx`：底部输入区主组件
  - `components/`：子组件目录（ActionButtons、InputArea、MediaPreview、UploadMenu）
  - `hooks/useFooterInput.ts`：输入状态管理 hook
  - `types.ts`、`constants.ts`：类型和常量
- 新增 `frontend/src/app/console/AIConfig/components/ConfigSelector.tsx`：配置选择器组件（从 console 根目录迁移）
- 新增 `frontend/src/app/console/AIConfig/hooks/useConfigSelector.ts`：配置选择器 hook
- 新增 `frontend/src/app/console/AIConfig/types.ts`：添加 StoredConfig 和 ConfigSelectorProps 类型定义
- 新增 `frontend/src/app/console/AIConfig/constants.ts`：添加 API 基础路径常量
- 新增 `frontend/src/app/console/AIConfig/utils.ts`：添加配置构建、转换、导入导出工具函数

### Changed
- 重构 `frontend/src/app/console/Dashboard.tsx` 至 `frontend/src/app/console/Dashboard/DashboardPage.tsx`：拆分为模块化结构
- 重构 `frontend/src/app/console/DeviceSettings.tsx` 至 `frontend/src/app/console/DeviceSettings/DeviceSettingsPage.tsx`：拆分为模块化结构
- 重构 `frontend/src/app/console/QuickTools.tsx` 至 `frontend/src/app/console/QuickTools/QuickToolsPage.tsx`：拆分为模块化结构
- 重构 `frontend/src/app/console/AIToolsList.tsx` 至 `frontend/src/app/console/AITools/AIToolsPage.tsx`：重命名为 AIToolsPage 并拆分为模块化结构
- 重构 `frontend/src/app/console/ConfigSelector.tsx` 至 `frontend/src/app/console/AIConfig/components/ConfigSelector.tsx`：移动到 AIConfig 模块内
- 重构 `frontend/src/components/layout/Footer.tsx` 至 `frontend/src/components/layout/Footer/Footer.tsx`：拆分为模块化结构
- 重构 `frontend/src/components/layout/Header.tsx` 至 `frontend/src/components/layout/Header/Header.tsx`：拆分为模块化结构
- 更新 `frontend/src/app/console/AIConfig/AIConfigPage.tsx`：从本地导入改为从 components 模块导入 ConfigSelector
- 更新 `frontend/src/app/console/page.tsx`：更新页面路由和组件引用
- 更新 `frontend/src/components/index.ts`：更新模块导出
- 优化 `backend/src/index.ts`：
  - 移除工具参数属性 Schema 的复杂 zod 类型定义
  - 移除 /api/tools 端点的响应 schema 验证（因为工具参数结构复杂且动态）
- 更新 `.kiro/steering/architecture.md`：反映新的模块化目录结构，包括 Dashboard/、AITools/、Footer/、Header/ 等模块

### Removed
- 移除 `frontend/src/app/console/Dashboard.tsx`（已迁移至 Dashboard/DashboardPage.tsx）
- 移除 `frontend/src/app/console/DeviceSettings.tsx`（已迁移至 DeviceSettings/DeviceSettingsPage.tsx）
- 移除 `frontend/src/app/console/QuickTools.tsx`（已迁移至 QuickTools/QuickToolsPage.tsx）
- 移除 `frontend/src/app/console/AIToolsList.tsx`（已迁移至 AITools/AIToolsPage.tsx）
- 移除 `frontend/src/app/console/ConfigSelector.tsx`（已迁移至 AIConfig/components/ConfigSelector.tsx）
- 移除 `frontend/src/components/layout/Footer.tsx`（已迁移至 Footer/Footer.tsx）
- 移除 `frontend/src/components/layout/Header.tsx`（已迁移至 Header/Header.tsx）

### Technical
- 模块化架构：控制台页面和布局组件采用统一的模块化目录结构（components/、hooks/、types.ts、constants.ts、utils.ts）
- 组件拆分：将大型组件拆分为多个子组件，提高代码可维护性和可读性
- 关注点分离：将业务逻辑拆分为独立的 hooks（useConfig、useTools、useUptime、useHeaderState、useFooterInput）
- 类型安全：各模块定义独立的 types.ts，确保类型安全和代码可读性
- 代码简化：移除复杂的 zod schema 验证，简化后端代码逻辑
- 导出规范：各模块通过 index.ts 统一导出，保持清晰的模块边界
- 文档更新：架构文档反映最新的目录结构和模块划分

## 备注

- 本次重构采用统一的模块化目录结构，便于后续维护和扩展
- 所有新模块均遵循 components/、hooks/、types.ts、constants.ts、utils.ts 的标准结构
- 配置选择器（ConfigSelector）整合到 AIConfig 模块内，实现功能内聚
- 移除复杂的 zod schema 验证，简化工具参数处理逻辑

## Technical Details

- Commit: `cfc5928` - refactor(console): 模块化重构控制台页面组件架构 (2026-01-06)
