# hosAgent v0.0.26（2025-12-29）

## 变更概览

- 重构数据库模块：将单一文件拆分为模块化架构，提升代码可维护性
- 模块化模型配置：实现一模型一文件的定义方式，支持动态加载
- 新增项目开发指南：添加 CLAUDE.md 文档
- 更新架构文档：完善项目结构说明

## 详情

### Changed
- 重构数据库模块，将 `index.ts` 拆分为多个独立模块
  - `connection.ts` - 数据库连接管理
  - `migrations.ts` - 表结构初始化与迁移
  - `types.ts` - 类型定义
  - `repositories/` - 数据访问层（ConfigRepository、SessionRepository、MessageRepository）
- 重构 Provider 模型配置系统
  - 新增 `models/` 模块，支持一模型一文件的定义方式
  - 实现 `defineModel()` 加载器，自动继承 Provider 默认配置
  - 新增模型注册表（registry.ts）和统一导出（index.ts）
  - 保留 `models.ts` 作为兼容导出层

### Added
- 新增 CLAUDE.md 项目开发指南，包含工作流和开发规范
- 新增多个模型定义文件
  - DeepSeek: chat.ts、reasoner.ts
  - OpenRouter: gemini-3-flash.ts
  - SiliconFlow: glm-4.6v.ts、qwen3-omni.ts
  - Zhipu: glm-4.6v.ts、glm-4.6v-flash.ts、glm-4v-flash.ts
- 新增 Provider 默认配置（providers/deepseek.ts、openrouter.ts、siliconflow.ts、zhipu.ts）

### Documentation
- 更新 `.kiro/steering/backend.md`：反映数据库和 Provider 模块的新架构
- 更新 `.kiro/steering/code-structure.md`：添加新增模型流程说明和详细的目录结构
- 更新 `.kiro/steering/project.md`：完善项目整体结构说明
- 新增 CLAUDE.md：包含 CREATE NEW TAG 和 PUSH 工作流说明

### Technical
- 数据库模块采用分层架构，提升代码可测试性和可维护性
- 模型配置系统采用注册表模式，支持动态模型加载和查询
- 使用模板方法模式简化 Provider 实现细节

## 备注

- 本版本为架构重构版本，不涉及功能变更
- 新的模块化架构便于后续添加新模型和维护代码
- CLAUDE.md 为开发团队提供统一的工作流程指南

## Technical Details

- Commit: `5bcb745` - refactor: 重构数据库和 Provider 模块架构 (2025-12-29 12:52)
