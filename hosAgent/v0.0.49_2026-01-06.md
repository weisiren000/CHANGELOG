# hosAgent v0.0.49 (2026-01-06)

## 变更概览

- 迁移聊天组件到页面模块：将 `components/chat/` 重构到 `app/main/components/chat/`
- 模块化控制台认证流程：提取 `LoginScreen` 组件和 `useAuth` hook
- 增强 AIConfig 面板功能：添加 SaveAsModal 和 useAIConfigState hook
- 更新架构文档：反映新的目录结构和组件位置

## 详情

### Added
- 新增 `frontend/src/app/console/AIConfig/components/SaveAsModal.tsx`：配置另存为对话框组件
- 新增 `frontend/src/app/console/AIConfig/hooks/useAIConfigState.ts`：AI 配置状态管理 hook
- 新增 `frontend/src/app/console/components/LoginScreen.tsx`：控制台登录页面组件
- 新增 `frontend/src/app/console/components/index.ts`：控制台组件统一导出
- 新增 `frontend/src/app/console/hooks/index.ts`：控制台 hooks 统一导出
- 新增 `frontend/src/app/console/hooks/useAuth.ts`：认证流程 hook（OTP 验证）
- 新增 `frontend/src/app/main/utils/toolCallUtils.ts`：工具调用工具函数

### Changed
- 重构 `frontend/src/components/chat/` 至 `frontend/src/app/main/components/chat/`：
  - `AudioMessage.tsx`
  - `ChatArea.tsx`
  - `ChatBubble.tsx`
  - `DrugCard.tsx`
  - `StepsContainer.tsx`
  - `ThinkBubble.tsx`
  - `WelcomeScreen.tsx`
  - `renderers/`：消息渲染器目录
- 重构 `frontend/src/app/console/page.tsx`：拆分认证逻辑到 `useAuth` hook，配置状态到 `useAIConfigState`
- 更新 `frontend/src/components/index.ts`：重导出迁移后的聊天组件
- 更新 `frontend/src/app/main/utils/index.ts`：导出 toolCallUtils 工具函数

### Removed
- 移除 `frontend/src/components/chat/AssistantMessage.tsx`（已迁移）
- 移除 `frontend/src/components/chat/SpeedDial.tsx`（已迁移）
- 移除 `frontend/src/components/chat/ToolCallBubble.tsx`（已迁移）
- 移除 `frontend/src/components/chat/ToolCallChain.tsx`（已迁移）
- 移除 `frontend/src/components/chat/utils/index.ts`（已迁移）

### Technical
- 组件迁移：遵循 Next.js 页面优先原则，将页面级组件移动到 `app/main/components/`
- 关注点分离：认证逻辑与业务逻辑分离，通过 hook 复用
- 状态管理：配置状态抽取为独立 hook，提高代码可维护性
- 架构演进：持续优化目录结构，区分页面组件和通用 UI 组件

## 备注

- 聊天组件迁移后，页面级组件位于 `app/main/components/chat/`，通用 UI 组件保留在 `components/`
- 控制台页面通过 hooks 实现认证逻辑分离，提高代码可读性
- AIConfig 面板通过 `useAIConfigState` 集中管理配置状态和操作

## Technical Details

- Commit: `399515a` - refactor: 重构前端架构并迁移聊天组件到页面模块 (2026-01-06)
