# hosAgent v0.0.31（2026-01-02）

## 变更概览

- **UI 组件重构**：将 AIConfig.tsx 重构为模块化目录结构，提升代码可维护性和复用性
- **思考模式优化**：改进 SiliconFlow Provider 的思考模式实现，支持 enable_thinking + thinking_budget 双参数配置
- **文档更新**：补充 DeepSeek-V3.2 的 thinking_budget 参数说明，添加思考模式限制提示

## 详情

### Changed

- **AIConfig 组件重构**：
  - 将 `frontend/src/app/console/AIConfig.tsx` 拆分为模块化目录结构
  - 新增独立组件：
    - `AIConfigPanel.tsx`：主配置面板组件
    - `ConfigCodeBlock.tsx`：配置代码展示组件
    - `ModelInfoCard.tsx`：模型信息卡片组件
    - `ReasoningSection.tsx`：推理配置区域组件
  - 新增辅助文件：
    - `constants.ts`：常量定义
    - `types.ts`：类型定义
    - `utils.ts`：工具函数
    - `index.ts`：统一导出
  - 优化组件职责分离，提高代码复用性和可测试性

- **SiliconFlow Provider 优化**：
  - 文件：`backend/src/core/provider/providers/SiliconFlowProvider.ts`
  - 支持 `enable_thinking` + `thinking_budget` 双参数配置（DeepSeek-V3.2）
  - 改进流式响应解析，直接处理 `reasoning_content` 字段
  - 扩展 `ExtendedReasoningConfig` 类型，支持 `'max'` 级别推理强度
  - 优化思考模式启用逻辑，提升配置灵活性

- **模型定义更新**：
  - `backend/src/core/provider/models/definitions/siliconflow/deepseek-v3.2.ts`：更新思考模式参数
  - `backend/src/core/provider/models/definitions/siliconflow/glm-4.6v.ts`：优化多模态支持配置

- **服务层优化**：
  - `backend/src/core/provider/service.ts`：移除冗余代码
  - `backend/src/routes/configs.ts`：优化配置路由逻辑
  - `backend/src/routes/sessions/schemas.ts`：更新会话 Schema 定义
  - `backend/src/routes/sessions/services/chatService.ts`：优化聊天服务

- **前端组件更新**：
  - `frontend/src/app/console/ConfigSelector.tsx`：适配新的 AIConfig 模块结构

### Documentation

- **README.md 更新**：
  - 补充 SiliconFlow DeepSeek-V3.2 的 `thinking_budget` 参数说明
  - 添加 SiliconFlow GLM-4.6V 思考模式限制提示
  - 更新 AI Provider 支持表格，明确标注各模型的思考能力

## 备注

本次更新主要优化了代码架构和思考模式实现：

- **代码重构**：将大型单文件组件拆分为模块化结构，提升了代码的可维护性和可测试性
- **思考模式增强**：DeepSeek-V3.2 现在支持更灵活的思考模式配置，包括 `enable_thinking` 和 `thinking_budget` 参数
- **文档完善**：补充了关键配置项的说明，帮助用户更好地理解和使用思考功能

## Technical Details

- Commit: `b6fbb18` - refactor(ui): 重构 AIConfig 组件并优化思考模式支持 (2026-01-02)
