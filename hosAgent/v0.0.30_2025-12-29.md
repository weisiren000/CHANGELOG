# hosAgent v0.0.30（2025-12-29）

## 变更概览

- **包管理器迁移**：从 npm 迁移到 pnpm,提升安装速度和磁盘空间利用率
- **新增推理模型**：添加 SiliconFlow DeepSeek-V3.2 模型支持,具备强大的推理能力
- **框架升级**：Next.js 从 16.0.5 升级到 16.0.6,获得最新功能和性能优化
- **文档同步增强**：优化文档同步钩子,添加 steering docs 检查

## 详情

### Added

- **pnpm 支持**：
  - 添加 `pnpm-workspace.yaml`：配置前端和后端工作空间
  - 添加 `pnpm-lock.yaml`：统一的依赖锁定文件
  - 添加 `.npmrc`：npm 配置文件
  - 配置 `onlyBuiltDependencies`：针对 better-sqlite3、esbuild、sharp、unrs-resolver 的构建优化

- **DeepSeek-V3.2 模型**：
  - 文件：`backend/src/core/provider/models/definitions/siliconflow/deepseek-v3.2.ts`
  - 支持推理模式(Reasoning Mode)
  - 160K 超长上下文支持
  - 采用 DeepSeek Sparse Attention (DSA) 技术
  - 适合复杂推理和 Agent 任务

- **推理能力配置规范**：
  - `.kiro/specs/reasoning-capability-config/`：推理能力配置规范目录
  - `requirements.md`：需求文档
  - `design.md`：设计文档
  - `tasks.md`：任务列表

### Changed

- **包管理器**：
  - 删除所有 `package-lock.json` 文件
  - 迁移到 pnpm 统一管理依赖

- **Next.js 升级**：
  - 从 16.0.5 升级到 16.0.6
  - 更新 `frontend/package.json`
  - 更新 `README.md` 中的技术栈说明
  - 更新 `.kiro/steering/project.md` 中的版本信息

- **SiliconFlow Provider 更新**：
  - 模型数量从 2 个增加到 3 个
  - 新增推理模型支持标志
  - 更新 `backend/src/core/provider/models/registry.ts`
  - 更新 `backend/src/core/provider/providers/SiliconFlowProvider.ts`
  - 更新 `README.md` 中的 Provider 支持表格

- **文档同步优化**：
  - `.kiro/hooks/sync-docs-on-change.kiro.hook`：添加 steering docs 检查
  - 从 4 个检查项增加到 5 个检查项

- **启动脚本更新**：
  - `start.bat`：适配 pnpm
  - `start_prod.bat`：适配 pnpm

- **AI 配置界面**：
  - `frontend/src/app/console/AIConfig.tsx`：优化配置逻辑

## 备注

本次更新主要提升了项目的依赖管理和模型能力：
- **依赖管理**：pnpm 提供了更快的安装速度和更好的磁盘空间利用率,同时解决了 npm 的一些已知问题
- **推理能力**：DeepSeek-V3.2 模型的引入增强了 Agent 的复杂推理能力,支持 Thinking Mode 模式
- **框架升级**：Next.js 16.0.6 带来了性能优化和 bug 修复

## Technical Details

- Commit: `f5795bd` - feat(pnpm): 迁移到 pnpm 并添加 DeepSeek-V3.2 模型支持 (2025-12-29)