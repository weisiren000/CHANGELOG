# hosAgent v0.0.25（2025-12-28）

## 变更概览

- 实现多模态支持：新增图片、视频、文档的上传和处理能力
- 统一聊天接口：合并多个分散的聊天端点为单一 `/api/sessions/:id/chat` 接口
- 新增 Markdown 实时渲染支持，优化消息展示体验
- 重构聊天组件架构，提升代码可维护性
- 新增 Speed Dial 快速操作组件

## 详情

### Added
- 多模态消息支持，可上传和处理图片、视频、PDF/Word/Excel/TXT 文档
- 前端媒体上传功能，支持拖拽和点击上传，提供上传进度和预览
- Markdown 内容实时渲染，支持代码高亮、表格、列表等格式
- 新增 Speed Dial 快速操作组件，提供便捷的功能入口
- 新增多个聊天相关自定义 hooks：`useMessages`、`useSessions`、`useMediaUpload`
- 新增聊天组件库：`ChatInput`、`MessageBubble`、`MessageList`、`SessionList`、`MediaPreview`、`MarkdownContent`
- 前端测试环境配置（vitest），新增 MarkdownContent 组件单元测试
- 实时 Markdown 渲染设计文档和需求规格

### Changed
- 后端统一聊天接口至 `/api/sessions/:id/chat`，移除旧的分散端点
- 重构前端聊天组件架构，从单体组件拆分为模块化组件结构
- 优化 AI 配置状态显示，提升用户体验
- 统一代码格式化和箭头函数语法，提升代码一致性
- 更新 `.kiro` 架构文档，反映最新的后端和前端结构

### Removed
- 移除旧的 `/api/chat/stream` 端点
- 移除前端旧的 `TestChatPanel` 单体组件

### Technical
- 后端多模态处理：支持 multipart/form-data 请求，文件大小限制 100MB
- 前端媒体管理：支持图片/视频预览，文件类型验证
- Markdown 渲染：使用 `react-markdown` 和 `react-syntax-highlighter` 实现
- 组件测试：使用 Vitest 和 React Testing Library

## 备注

- 本版本为重大功能更新，包含架构重构和多模态支持
- 建议更新后测试多媒体上传和聊天功能

## Technical Details

- Commit: `799bbcc` - feat(backend): 统一聊天接口并移除旧端点 (2025-12-28 03:29)
- Commit: `58f009a` - feat(frontend): 添加上传功能和 Speed Dial 组件 (2025-12-28 00:46)
- Commit: `1ebed24` - feat(chat): 添加 Markdown 渲染支持并优化 AI 配置状态显示 (2025-12-28 00:19)
- Commit: `1048f9a` - style(core): 统一代码格式化和箭头函数语法 (2025-12-27 23:23)
- Commit: `aba36c0` - refactor(frontend): 聊天组件重构并集成 Markdown 渲染 (2025-12-27 23:22)
- Commit: `b500e8a` - chore(.kiro): 新增组件化拆分提醒钩子 (2025-12-27 20:44)
- Commit: `70b7995` - feat: 新增多模态支持和视觉模型集成 (2025-12-27 20:34)
